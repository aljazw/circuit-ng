import{a as Q,b as X,c as Z}from"./chunk-MMTRXB6E.js";import{a as z}from"./chunk-SJ3MZAYP.js";import{a as V,b as Y,c as W}from"./chunk-YID4OPRJ.js";import{G as y}from"./chunk-KSPGRP7I.js";import{$ as F,A as h,B as d,C as r,Ca as L,D as a,E as P,G as g,H as v,Ha as j,I as m,J as I,Ja as k,K as u,La as U,N as l,O as s,Sa as H,Ta as J,Va as K,ca as x,da as c,ea as w,fa as M,ga as R,ha as E,ia as T,ja as O,ka as N,la as A,oa as B,ua as D,v as e,w as _,x as b,xa as G,z as C}from"./chunk-NL4QJYCF.js";import"./chunk-HB7CQCBC.js";import{a as q}from"./chunk-VKWB5ZIR.js";import"./chunk-ZIEJECAL.js";import"./chunk-ZKIZOI5D.js";import"./chunk-QTAXBO3P.js";import"./chunk-CW7FUU2B.js";import"./chunk-O6FA337S.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{f as S}from"./chunk-D7YYRZS5.js";function ee(i,n){if(i&1&&(r(0,"ion-note",7),m(1),l(2,"translate"),a()),i&2){let t=v();e(),u(" ",s(2,1,t.getError("username"))," ")}}function te(i,n){if(i&1&&(r(0,"ion-note",7),m(1),l(2,"translate"),a()),i&2){let t=v();e(),u(" ",s(2,1,t.getError("email"))," ")}}function ie(i,n){if(i&1&&(r(0,"ion-note",7),m(1),l(2,"translate"),a()),i&2){let t=v();e(),u(" ",s(2,1,t.getError("password"))," ")}}function ne(i,n){if(i&1&&(r(0,"ion-note",7),m(1),l(2,"translate"),a()),i&2){let t=v();e(),u(" ",s(2,1,t.getError("confirmPassword"))," ")}}var $=class i{constructor(n,t,o,p){this.authService=n;this.translate=t;this.toastController=o;this.firestore=p;q({alertCircleOutline:U}),this.loginForm=new R({username:new E("",[c.required,c.minLength(4)]),email:new E("",[c.required,c.email]),password:new E("",[c.required,c.minLength(8)]),confirmPassword:new E("",[c.required])},{validators:X})}loginForm;submitted=!1;loading=!1;getError(n){return Q(this.loginForm.get(n),n,this.submitted)}ngOnInit(){}submit(){return S(this,null,function*(){if(this.submitted=!0,!this.loginForm.valid)return;let{email:n,password:t,username:o}=this.loginForm.value;this.loading=!0;try{let p=yield this.authService.register(n,t);if(p.user){let f=p.user.uid;yield Y(V(this.firestore,"users",f),{username:o,email:n,createdAt:new Date})}}catch(p){p.code==="auth/email-already-in-use"?this.translate.get("EMAIL_IN_USE").subscribe(f=>this.showErrorMessage(f)):this.translate.get("REGISTER_FAILED").subscribe(f=>this.showErrorMessage(f))}finally{this.loading=!1}})}showErrorMessage(n){return S(this,null,function*(){(yield this.toastController.create({message:n,duration:3e3,color:"danger",position:"top",icon:"alert-circle-outline"})).present()})}onFocus(){this.submitted=!1}static \u0275fac=function(t){return new(t||i)(_(y),_(H),_(j),_(W))};static \u0275cmp=b({type:i,selectors:[["app-register-page"]],decls:35,vars:30,consts:[[1,"ion-padding"],[1,"login-content"],[1,"login-container"],[1,"login-title"],[1,"login-subtitle"],[3,"ngSubmit","formGroup"],["type","text","formControlName","username","labelPlacement","floating",3,"ionFocus","label"],["color","danger"],["type","email","formControlName","email","labelPlacement","floating",3,"ionFocus","label"],["type","password","formControlName","password","labelPlacement","floating","enterkeyhint","done",3,"ionFocus","label"],["type","password","formControlName","confirmPassword","labelPlacement","floating","enterkeyhint","done",3,"ionFocus","label"],["label","REGISTER",3,"loading"],[1,"sign-container"],[1,"sign-text"],["fill","clear","routerLink","/login"]],template:function(t,o){t&1&&(P(0,"app-header"),r(1,"ion-content",0)(2,"div",1)(3,"div",2)(4,"h1",3),m(5),l(6,"translate"),a(),r(7,"p",4),m(8),l(9,"translate"),a(),r(10,"form",5),g("ngSubmit",function(){return o.submit()}),r(11,"ion-item")(12,"ion-input",6),l(13,"translate"),g("ionFocus",function(){return o.onFocus()}),a()(),C(14,ee,3,3,"ion-note",7),r(15,"ion-item")(16,"ion-input",8),l(17,"translate"),g("ionFocus",function(){return o.onFocus()}),a()(),C(18,te,3,3,"ion-note",7),r(19,"ion-item")(20,"ion-input",9),l(21,"translate"),g("ionFocus",function(){return o.onFocus()}),a()(),C(22,ie,3,3,"ion-note",7),r(23,"ion-item")(24,"ion-input",10),l(25,"translate"),g("ionFocus",function(){return o.onFocus()}),a()(),C(26,ne,3,3,"ion-note",7),P(27,"app-auth-button",11),a(),r(28,"div",12)(29,"p",13),m(30),l(31,"translate"),a(),r(32,"ion-button",14),m(33),l(34,"translate"),a()()()()()),t&2&&(e(5),I(s(6,14,"REGISTER_TITLE")),e(3),I(s(9,16,"REGISTER_SUBTITLE")),e(2),d("formGroup",o.loginForm),e(2),d("label",s(13,18,"USERNAME")),e(2),h(o.getError("username")?14:-1),e(2),d("label",s(17,20,"EMAIL")),e(2),h(o.getError("email")?18:-1),e(2),d("label",s(21,22,"PASSWORD")),e(2),h(o.getError("password")?22:-1),e(2),d("label",s(25,24,"CONFIRM_PASSWORD")),e(2),h(o.getError("confirmPassword")?26:-1),e(),d("loading",o.loading),e(3),I(s(31,26,"ALREADY_ACCOUNT_MESSAGE")),e(3),u(" ",s(34,28,"SIGN_IN")," "))},dependencies:[D,G,L,B,k,K,A,T,w,M,O,N,x,F,z,Z,J],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.login-container[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.login-title[_ngcontent-%COMP%]{font-size:2.3rem;font-weight:700;margin-bottom:.5rem;animation:_ngcontent-%COMP%_fadeInDown .6s ease}.login-subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem;color:gray;animation:_ngcontent-%COMP%_fadeIn .8s ease}.login-btn[_ngcontent-%COMP%]{margin-top:1.5rem}.sign-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;text-align:center;font-size:.9rem;gap:.2rem}.sign-text[_ngcontent-%COMP%]{opacity:.5}ion-input[_ngcontent-%COMP%]{--highlight-color-valid: none;--highlight-color-focused: none;--highlight-color-invalid: none}.sign-container[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]})};export{$ as RegisterPageComponent};
